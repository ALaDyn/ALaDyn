#!/bin/bash

module load PrgEnv-intel
module swap craype-${CRAY_CPU_TARGET} craype-haswell
module load boost
module load cmake

export FC=ftn
export CLINKER=$CXX

mkdir -p build ; cd build
cmake .. -DCORI_HASWELL:BOOL=TRUE -DCMAKE_BUILD_TYPE="Profiling" -DCMAKE_LINKER=$CLINKER -DBoost_NO_BOOST_CMAKE=ON -DCMAKE_Fortran_COMPILER=$FC
cmake --build . --target install -- -j8
cd ..
