#!/bin/bash

export CRAY_CPU_TARGET=mic-knl
module load PrgEnv-intel
module load boost
module load cmake

export FC=ftn
export CLINKER=$CXX

mkdir -p build ; cd build
cmake .. -DCORI_KNL:BOOL=TRUE -DCMAKE_BUILD_TYPE="Reports" -DCMAKE_LINKER=$CLINKER -DBoost_NO_BOOST_CMAKE=ON -DCMAKE_Fortran_COMPILER=$FC
cmake --build . --target install -- -j8
cd ..
